<?xml version='1.0'?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
	       "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY mdash "&#8212;">
  <!ENTITY appversion "0.7">
  <!ENTITY manrevision "0.2">
  <!ENTITY date "12 August 2008">
  <!ENTITY app_no_markup "Telepathy">
  <!ENTITY app "<application>&app_no_markup;</application>">
  <!ENTITY url_examples_base "./examples/">
  <!ENTITY url_spec "http://telepathy.freedesktop.org/spec.html">
  <!ENTITY url_spec_base "&url_spec;#org.freedesktop.Telepathy.">
  <!ENTITY url_telepathy_glib_base "http://telepathy.freedesktop.org/doc/telepathy-glib/telepathy-glib-">
  <!ENTITY url_dbus_spec_base "http://dbus.freedesktop.org/doc/dbus-specification.html#">
  <!ENTITY url_dbus_glib_base "http://dbus.freedesktop.org/doc/dbus-glib/">
  <!ENTITY url_dbus_python_base "http://dbus.freedesktop.org/doc/dbus-python/api/">
]>

<chapter id="chapter-connection-manager">
  <title>Connection Manager</title>

  <para>
   Support for the various communication protocols is provided by several
   <literal>Connection Managers</literal>. For instance, the
   <literal>telepathy-gabble</literal> Connection Manager provides support
   for the <acronym>XMPP</acronym> protocol, also known as
   <literal>Jabber</literal>.
  </para>
  
  <para>
   There is no central &app; D-Bus service. Instead there are several
   connection manager services, activated on demand, and each of these
   connection managers provide the same core set of D-Bus interfaces, such as
   <interfacename>Connection</interfacename> and
   <interfacename>Channel</interfacename>, allowing application code to be
   written generically for all connection managers.
  </para>

  <para>
   All Telepathy Connection Managers have <literal>bus name</literal>s that
   begin with &quot;org.freedesktop.Telepathy.ConnectionManager&quot; so
   you can discover all available connection managers by calling the D-Bus
   <methodname>ListActivatableNames</methodname> method and then comparing
   the names with that prefix. telepathy-glib provides the
   <ulink url="&url_telepathy_glib_base;connection-manager.html#tp-list-connection-managers"><function>tp_list_connection_managers</function></ulink> function
   that conveniently does this.
  </para>
  
  <para>
   You may then discover what protocols are provided by each connection
   manager by calling the ConnectionManagers's
   <methodname>ListProtocols</methodname> method. telepathy-glib's
   <ulink url="&url_telepathy_glib_base;connection-manager.html"><classname>TpConnectionManager</classname></ulink>
   object calls this automatically and emits the <literal>got-info</literal>
   signal when it has returned. You can examine the
   TpConnectionManager::protocols struct field in your signal handler.
  </para>
  
  <para>
   Applications, such as IM clients, might choose to offer the user a choice
   from that list of protocols and then use the appropriate connection manager.
   Others might use only one protocol and therefore hard-code the connection
   manager's <literal>bus name</literal>.
  </para> 

  <sect1>
  <title>Protocols Listing Example</title>
    <para>This example list all available connection managers and the protocols they support.</para>
    <para><ulink url="&url_examples_base;list_all_protocols">Source Code</ulink></para>
  </sect1>

</chapter>
